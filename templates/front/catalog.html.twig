{% extends "layout.html.twig" %}

{% form_theme formFiltre 'bootstrap_4_layout.html.twig' %}

{% block title %} Catalogue {% endblock %}


{% block contenu %}

	<div class="row">

		<div class="col-sm-2">
			{{ form_start(formFiltre) }}
			{{ form_row(formFiltre.auteur, {'label': 'Auteur'}) }}
{# 			{{ form_row(formFiltre.editeur) }} #}
			{{ form_row(formFiltre.categorie, {'label': 'Catégorie'}) }}
{# 			{{ form_row(formFiltre.date_parution) }} #}
			{{ form_row(formFiltre.est_conseil, {'label': 'Conseillé par la librairie'}) }}
			<button type="submit" class="btn btn-success">Appliquez les filtres</button>
			{{ form_end(formFiltre) }}
		</div>

		<div class="col-sm-10">      
		  <h2 class="text-muted">Le catalogue</h2>
      {% for flashMessage in app.session.flashbag.get('notice') %}
        <div class="alert alert-warning">{{flashMessage}}</div>
      {% endfor %}
  		  <div class="row">
            {% for livre in pagination %}
              <div class="col-lg-3 col-md-4 col-sm-6 mb-4">
                <div class="card h-100">
                  <a href=" {{ path('front_fiche', { 'id': livre.id }) }} "><img class="card-img-top" src="{{ asset('images/livres/' ~ livre.image ~'') }}" alt="{{ livre.titre }}"></a>
                  <div class="card-body">
                    <h5 class="card-title"><a href=" {{ path('front_fiche', { 'id': livre.id }) }} ">{{ livre.titre }}</a></h5>
                    <h6 class="card-subtitle mb-2 text-muted">{{ livre.auteur.PrenomAuteur }} {{ livre.auteur.NomAuteur }}</h6>
                    <h6>{{ livre.PrixTtc|number_format(2, ',', ' ') }} €</h6>
                    <p class="card-text">{{ livre.Resume|truncate(70, true) }}</p>
                    <p class="card-subtitle mb-2 text-muted">Parution le {{ livre.dateParution|date("d/m/Y") }}</p>
                  </div>
                  <div class="card-footer">
                    <small class="text-muted">&#9733; &#9733; &#9733; &#9733; &#9734;</small>
                  </div>
                </div>
              </div>
            {% endfor %}            
          </div>
        <!-- /.row -->
        <div class="navigation text-center">
            {{ knp_pagination_render(pagination) }}
        </div>
		</div>

	</div>

{% endblock %}